# ER図1

## 全体
- 登録日時、更新日時が抜けています。デフォルトでついていますので、特別な理由がない限りは記述しましょう。

## 管理人テーブル
- エンドユーザ、商品テーブルと紐づいています。
  > 管理人はエンドユーザ、商品テーブルを子に持つ必要がありますか？

## エンドユーザテーブル
- 複数の配送先を考慮できていません。 
  > 複数の配送先がある場合、どのように管理しますか？
- ユーザの退会を考慮できていません。
  > 退会したユーザの管理はどのようにおこないますか？

## 商品テーブル
- 同じレーベル名が重複してしまいます。
  > 1つのレーベルは一つの商品しか持ちませんか？
- 同じアーティスト名が重複してしまいます。
  > 1人のアーティストは一つの商品しか持ちませんか？
- 同じジャンルが重複してしまいます。
  > 1つのジャンルは一つの商品しか持ちませんか？
- 発売日カラムがありません。
  > 発売日はどのように管理しますか？
- 入荷による在庫管理ができていません。
  > 在庫が減ってきた場合、どのように在庫の管理をおこないますか？
- 複数のディスクがあることを考慮していません。
  > 一つの商品は一つのディスクしか持っていませんか？
- 複数の曲があることを考慮できていません。
  > 一つの商品は一つの曲しか持っていませんか？
- 論理削除を考慮できていません。
  > 商品の情報はすべて削除しますか？

## カートテーブル
- テーブル名は何に注目しているかでつける必要があります。適切な名前に修正しましょう。
- 合計金額カラムがあります。
  > 合計金額は数量と価格で求めることができませんか？
- 主キーが注文IDになっています。テーブル名と合っていないので、修正しましょう。
- 外部キーで紐づいているので、商品テーブルが持つカラムと同じカラムを持つ必要はありません。
- 決済テーブルと紐づいています。
  > カートに入れた時点では注文は完了していません。リレーションを見直してみましょう。
- どのユーザのカート内商品なのかわかりません。
  > 誰がカートにいれたのか特定するために、どのようなリレーションにすればよいでしょうか？

## 決済テーブル
- テーブル名と機能が異なっています。機能に沿った命名をしましょう。
- 送料が考慮されていません。
  > 変更したい場合、どのように管理しますか？
- データの登録と同時に購入手続きとなるので、購入日カラムは持つ必要がありません。
- 伝票の役割ができていません。
  > 誰宛に送ったか、いくら支払われたのかの情報はどのように管理しますか？

## 購入履歴テーブル
- 主キーが存在していません。追記しましょう。
- 商品テーブルと結びつけられていない。
- 実際に購入した商品の個数を管理するカラムが存在していない。
- 購入時の価格を管理するカラムが存在していない。
- 配送ステータスは１つの決済単位で決まるので、決済テーブルにそのカラムを追加するべき。
- 管理者目線のテーブル名にすべきです。
